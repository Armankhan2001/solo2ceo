<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client Data Viewer</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- PapaParse -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<!-- DataTables -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: #f4f6f9;
    padding: 20px;
}
h1 {
    text-align: center;
    color: #2575fc;
    margin-bottom: 25px;
}
.table-container {
    max-width: 1300px;
    margin: auto;
    background: #fff;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.1);
}
table.dataTable thead {
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    color: #fff;
}
table.dataTable thead th {
    padding: 12px;
}
.dataTables_filter input {
    border-radius: 10px;
    border: 1px solid #ccc;
    padding: 8px 12px;
}
</style>
</head>
<body>

<h1>ðŸ“Š Client Data Viewer</h1>

<div class="table-container">
    <table id="dataTable" class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Message</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will populate here -->
        </tbody>
    </table>
</div>

<script>
// Your Google Sheets CSV link
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRTzdvmfVRC6ZgkxgLpjkILouwicSPGn3LfGuV2GG2LQ9wwq_XkLj-Oh7kpGYGCdyqTD6KJncJeB7C9/pub?output=csv";

Papa.parse(csvUrl, {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(results) {
        const data = results.data;
        const tbody = document.querySelector("#dataTable tbody");
        
        data.forEach(row => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${row.Timestamp || ''}</td>
                <td><span class="fw-bold">${row.Name || ''}</span></td>
                <td><a href="mailto:${row.Email || ''}" class="text-primary">${row.Email || ''}</a></td>
                <td><a href="tel:${row.Phone || ''}" class="badge bg-success">${row.Phone || ''}</a></td>
                <td>${row.Message || ''}</td>
                <td><span class="badge bg-info text-dark">${row.Location || ''}</span></td>
            `;
            tbody.appendChild(tr);
        });

        // Activate DataTables
        $('#dataTable').DataTable({
            responsive: true,
            pageLength: 10,
            order: [[0, "desc"]], // sort by Timestamp by default
        });
    }
});
</script>

</body>
</html>
