<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Influencer Submission</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    #floatingBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg,#6a11cb,#2575fc);
      color: #fff;
      border: none;
      padding: 15px 25px;
      border-radius: 50px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    #floatingBtn:hover { transform: scale(1.05); }
  </style>
</head>
<body>

<!-- Inquiry Popup Modal -->
<div class="modal fade" id="inquiryModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-3">
      <div class="modal-header">
        <h5 class="modal-title">Add Influencer Data</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="inquiryForm">
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Education</label>
            <input type="text" name="education" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Field</label>
            <input type="text" name="field" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Category</label>
            <input type="text" name="category" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Video URL</label>
            <input type="url" name="video" class="form-control" placeholder="https://youtube.com/..." required>
          </div>
          <button type="submit" class="btn btn-primary w-100">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Floating Button -->
<button id="floatingBtn" onclick="openModal()">Add Influencer</button>

<script>
  const inquiryModal = new bootstrap.Modal(document.getElementById("inquiryModal"));
  const floatingBtn = document.getElementById("floatingBtn");

  // Show modal on page load
  window.addEventListener("load", ()=>{ inquiryModal.show(); });
  document.getElementById("inquiryModal").addEventListener("hidden.bs.modal", ()=>{ floatingBtn.style.display="block"; });
  function openModal(){ inquiryModal.show(); }

  // GSAP animation
  gsap.from(".navbar", { y: -50, opacity: 0, duration: 1, ease: "power3.out" });
  gsap.from("header h1", { scale: 0.5, opacity: 0, duration: 1.2, ease: "back.out(1.7)" });

  // Handle form submission
  document.getElementById("inquiryForm").addEventListener("submit", function(e){
    e.preventDefault();

    const data = {
      name: this.name.value,
      education: this.education.value,
      field: this.field.value,
      category: this.category.value,
      video: this.video.value
    };

    if(!data.name || !data.education || !data.field || !data.category || !data.video){
      alert("Please fill all fields!");
      return;
    }

    fetch("https://script.google.com/macros/s/AKfycbw8GVBd45_J7O_eHxHaytBmH8valVgHcUmK8a1QkOOy3cXS-AZRd5brWMtVqFnWepmf9Q/exec", {   // Replace with your Apps Script exec URL
      method: "POST",
      body: JSON.stringify(data),
      headers: { "Content-Type": "application/json" }
    })
    .then(res => res.json())
    .then(res => {
      if(res.status === "success"){
        alert("✅ Data submitted successfully!");
        this.reset();
        inquiryModal.hide();
      } else {
        alert("⚠️ Error: " + (res.message || "Unknown error"));
      }
    })
    .catch(err => {
      console.error(err);
      alert("❌ Error submitting data. Make sure your Web App is deployed as 'Anyone, even anonymous' and page is served over HTTPS.");
    });
  });
</script>

</body>
</html>
